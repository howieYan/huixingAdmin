(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29d9e442"],{"1dde":function(t,e,a){var r=a("d039"),n=a("b622"),o=a("2d00"),i=n("species");t.exports=function(t){return o>=51||!r((function(){var e=[],a=e.constructor={};return a[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},2404:function(t,e,a){"use strict";var r=a("300b"),n=a.n(r);n.a},"300b":function(t,e,a){},"58d3":function(t,e,a){"use strict";var r=a("f08e"),n=a.n(r);n.a},"65f0":function(t,e,a){var r=a("861d"),n=a("e8b5"),o=a("b622"),i=o("species");t.exports=function(t,e){var a;return n(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?r(a)&&(a=a[i],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},8418:function(t,e,a){"use strict";var r=a("c04e"),n=a("9bf2"),o=a("5c6c");t.exports=function(t,e,a){var i=r(e);i in t?n.f(t,i,o(0,a)):t[i]=a}},a15b:function(t,e,a){"use strict";var r=a("23e7"),n=a("44ad"),o=a("fc6a"),i=a("a640"),s=[].join,c=n!=Object,l=i("join",",");r({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),o=a("a691"),i=a("50c4"),s=a("7b0b"),c=a("65f0"),l=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,v=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var a,r,u,d,f,p,b=s(this),k=i(b.length),x=n(t,k),w=arguments.length;if(0===w?a=r=0:1===w?(a=0,r=k-x):(a=w-2,r=v(m(o(e),0),k-x)),k+a-r>h)throw TypeError(g);for(u=c(b,r),d=0;d<r;d++)f=x+d,f in b&&l(u,d,b[f]);if(u.length=r,a<r){for(d=x;d<k-r;d++)f=d+r,p=d+a,f in b?b[p]=b[f]:delete b[p];for(d=k;d>k-r+a;d--)delete b[d-1]}else if(a>r)for(d=k-r;d>x;d--)f=d+r-1,p=d+a-1,f in b?b[p]=b[f]:delete b[p];for(d=0;d<a;d++)b[d+x]=arguments[d+2];return b.length=k-r+a,u}})},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},ad01:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AddCoursClassification"},[a("div",{staticClass:"HeaderComponent"},[a("div",{staticClass:"row"},[a("div",{staticClass:"border"}),a("div",{staticStyle:{"font-size":"17px"}},[t._v(t._s(t.id?"编辑帖子":"发布帖子"))])]),a("div",[a("Button",{attrs:{icon:"ios-arrow-back"},on:{click:t.onBack}},[t._v("返回")])],1)]),a("div",{staticClass:"content AddCoursList"},[a("div",[a("Card",{attrs:{"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(t.id?"编辑帖子":"新建帖子")+" ")]),a("p",{attrs:{slot:"extra"},slot:"extra"},[a("span",{staticStyle:{color:"#ed4014"}},[t._v(" * ")]),t._v(" 为必填项 ")]),a("div",{staticClass:"addForm"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"帖子标题",prop:"title"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入帖子标题"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1),a("FormItem",{attrs:{label:"话题",prop:"topicName"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入话题"},model:{value:t.formValidate.topicName,callback:function(e){t.$set(t.formValidate,"topicName",e)},expression:"formValidate.topicName"}})],1),a("FormItem",{attrs:{label:"帖子正文",prop:"content"}},[a("Input",{staticStyle:{width:"350px"},attrs:{type:"textarea",rows:4,placeholder:"请输入帖子正文"},model:{value:t.formValidate.content,callback:function(e){t.$set(t.formValidate,"content",e)},expression:"formValidate.content"}})],1),a("FormItem",{attrs:{label:"帖子图片"}},[a("div",{staticStyle:{display:"flex"}},[t._l(t.uploadList,(function(e,r){return a("div",{staticClass:"demo-upload-list"},[[a("img",{attrs:{src:e.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return t.handleView(e)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return t.handleViewRemove(e,r)}}})],1)]],2)})),a("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{limit:1,action:t.domain,data:t.QiniuData,"on-error":t.uploadError,"before-upload":t.beforeAvatarUpload,"on-success":t.handleAvatarSuccess,"show-file-list":!1}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],2),a("div",{staticClass:"el-upload__tip"},[t._v(" 尺寸为-*-比例，大小不能超过2MB，图片只能为jpg、png格式 ")])]),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("发布")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.onBack()}}},[t._v("取消")])],1)],1)],1)])],1)]),a("Modal",{attrs:{title:"查看图片"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:t.imgName}}):t._e()])],1)},n=[],o=(a("a15b"),a("d81d"),a("a434"),a("b0c0"),a("96cf"),a("1da1")),i=a("4ec3"),s=a("5599"),c=a("ceb0"),l={name:"addPlatformPost",components:{Editor:c["a"]},data:function(){return{loading:!0,visible:!1,imgName:"",userList:[],uploadList:[],domain:"http://upload.qiniu.com",QiniuData:{key:"",token:""},formValidate:{title:"",topicName:"",content:"",imgPath:""},ruleValidate:{title:[{required:!0,message:"帖子标题不能为空",trigger:"blur"}],topicName:[{required:!0,message:"话题不能为空",trigger:"blur"}],content:[{required:!0,message:"帖子正文不能为空",trigger:"blur"}]}}},computed:{id:function(){return this.$route.query.id}},methods:{formatNumber:s["a"],onBack:function(){this.$router.go(-1)},handleView:function(t){this.imgName=t.url,this.visible=!0},handleViewRemove:function(t,e){this.uploadList.splice(e,1)},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){var a=new FormData,r=[];e.uploadList.length>0&&e.uploadList.map((function(t){r.push(t.key)})),console.log(r.join(",")),a.append("title",e.formValidate.title),a.append("topic.name",e.formValidate.topicName),a.append("content",e.formValidate.content),a.append("imgPath",r.join(",")),e.id?(a.append("id",e.id),e.LoadDataEdit(a)):e.LoadDataAdd(a)}else e.$Message.error("请按要求填写")}))},LoadDataEdit:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i["a"].editPlatformPost(t);case 3:r=a.sent,200===r.code?(e.$Message.success("编辑帖子成功"),e.onBack()):e.$Message.error(r.msg),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},LoadDataAdd:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i["a"].addPlatformPost(t);case 3:r=a.sent,200===r.code?(e.$Message.success("发布帖子成功"),e.onBack()):e.$Message.error(r.msg),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},uploadError:function(t,e,a){this.$Message({message:"上传出错，请重试！",type:"error",center:!0})},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,a=t.size/1024/1024<2;return e||this.$Message.error("上传文件只能是 JPG、PNG、gif 格式!"),a||this.$Message.error("上传图片大小不能超过 2MB!"),this.QiniuData.key="".concat(this.formatNumber(new Date))+t.name,e&&a},LoadQiNiuToken:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i["a"].updateToken();case 3:a=e.sent,200===a.code?t.QiniuData.token=a.data:t.$Message.error(a.message),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},handleAvatarSuccess:function(t){this.LoadupdateUrl({key:t.key})},LoadupdateUrl:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,i["a"].updateUrl(t);case 3:r=a.sent,200===r.code?(n={key:t.key,url:r.data},e.uploadList.push(n),e.$Message.success("上传成功"),e.$refs.upload&&e.$refs.upload.clearFiles()):e.$Message.error(r.msg),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),console.error(a.t0);case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},LoadData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,!t.id){e.next=6;break}return e.next=4,i["a"].PlatformPostItemDetails({id:t.id});case 4:a=e.sent,200===a.code?(r=a.data,console.log(r),t.formValidate.title=r.title,t.formValidate.content=r.content,t.formValidate.imgPath=r.imgPath,t.formValidate.topicName=r.topicVo.name):t.$Message.error(a.msg);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},created:function(){this.LoadQiNiuToken(),this.LoadData()},mounted:function(){},updated:function(){}},u=l,d=(a("2404"),a("2877")),f=Object(d["a"])(u,r,n,!1,null,null,null);e["default"]=f.exports},ae40:function(t,e,a){var r=a("83ab"),n=a("d039"),o=a("5135"),i=Object.defineProperty,s={},c=function(t){throw t};t.exports=function(t,e){if(o(s,t))return s[t];e||(e={});var a=[][t],l=!!o(e,"ACCESSORS")&&e.ACCESSORS,u=o(e,0)?e[0]:c,d=o(e,1)?e[1]:void 0;return s[t]=!!a&&!n((function(){if(l&&!r)return!0;var t={length:-1};l?i(t,1,{enumerable:!0,get:c}):t[1]=1,a.call(t,u,d)}))}},b0c0:function(t,e,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,i=o.toString,s=/^\s*function ([^ (]*)/,c="name";r&&!(c in o)&&n(o,c,{configurable:!0,get:function(){try{return i.call(this).match(s)[1]}catch(t){return""}}})},b727:function(t,e,a){var r=a("0366"),n=a("44ad"),o=a("7b0b"),i=a("50c4"),s=a("65f0"),c=[].push,l=function(t){var e=1==t,a=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d;return function(p,m,v,h){for(var g,b,k=o(p),x=n(k),w=r(m,v,3),y=i(x.length),V=0,C=h||s,$=e?C(p,y):a?C(p,0):void 0;y>V;V++)if((f||V in x)&&(g=x[V],b=w(g,V,k),t))if(e)$[V]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return V;case 2:c.call($,g)}else if(u)return!1;return d?-1:l||u?u:$}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},ceb0:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("quill-editor",{attrs:{content:t.content,options:t.editorOption},on:{change:function(e){return t.onEditorChange(e)}}})],1)},n=[],o=(a("a753"),a("8096"),a("14e1"),a("953d")),i={name:"Editor",components:{quillEditor:o["quillEditor"]},props:["updateDataEvent","content"],data:function(){return{editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"]]}}}},computed:{},mounted:function(){},methods:{onEditorChange:function(t){t.quill;var e=t.html;t.text;this.$emit("updateDataEvent",e)}},created:function(){},updated:function(){}},s=i,c=(a("58d3"),a("2877")),l=Object(c["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},d81d:function(t,e,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),i=a("ae40"),s=o("map"),c=i("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e8b5:function(t,e,a){var r=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}},f08e:function(t,e,a){}}]);